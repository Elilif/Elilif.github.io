<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-02-28 Wed 19:48 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>百般武艺，此乃 Emacs （一）：用 Emacs 写博客</title>
<meta name="author" content="Eli Qian" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/css/styles.css" />
                  <script src="/scripts/script.js"></script>
                  <script src="/scripts/toc.js"></script>
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
<div id="preamble" class="status">
<nav class="nav">
  <a href="/index.html" class="button">Home</a>
  <a href="/config.html" class="button">Literate Emacs Config</a>
  <a href="/rss.xml" class="button">RSS</a>
</nav>
<hr>
</div>
<div id="content" class="content">
<header>
<h1 class="title">百般武艺，此乃 Emacs （一）：用 Emacs 写博客</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#使用-ox-publish.el-来生成博客">1. 使用 ox-publish.el 来生成博客</a>
<ul>
<li><a href="#为什么选择-ox-publish.el">1.1. 为什么选择 ox-publish.el</a>
<ul>
<li><a href="#兼容性">1.1.1. 兼容性</a></li>
<li><a href="#内置">1.1.2. 内置</a></li>
<li><a href="#可拓展性">1.1.3. 可拓展性</a></li>
</ul>
</li>
<li><a href="#blog-structure">1.2. 博客结构</a></li>
<li><a href="#基本配置">1.3. 基本配置</a>
<ul>
<li><a href="#杂项部分">1.3.1. 杂项部分</a></li>
<li><a href="#HTML-部分">1.3.2. HTML 部分</a></li>
<li><a href="#sitemap-部分">1.3.3. sitemap 部分</a></li>
<li><a href="#本章总结">1.3.4. 本章总结</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#RSS-生成">2. RSS 生成</a></li>
<li><a href="#Org-文学编程网页导出">3. Org 文学编程网页导出</a></li>
<li><a href="#总结">4. 总结</a></li>
</ul>
</div>
</nav>
<div class="preview">
本文简要介绍了如何使用 Emacs 来生成静态博客网站。主要分为三个模块：

<ol class="org-ol">
<li>博客生成</li>
<li>RSS 生成</li>
<li>文学编程网页导出</li>
</ol>

</div>

<div id="outline-container-使用-ox-publish.el-来生成博客" class="outline-2">
<h2 id="使用-ox-publish.el-来生成博客"><span class="section-number-2">1.</span> 使用 ox-publish.el 来生成博客</h2>
<div class="outline-text-2" id="text-使用-ox-publish.el-来生成博客">
</div>
<div id="outline-container-为什么选择-ox-publish.el" class="outline-3">
<h3 id="为什么选择-ox-publish.el"><span class="section-number-3">1.1.</span> 为什么选择 ox-publish.el</h3>
<div class="outline-text-3" id="text-为什么选择-ox-publish.el">
<p>
在 Emacs 里写博客的方案有很多，比如说 Org + Hugo 、Markdown/Org + Jekyll 等等。它们各有各的优点，但这不是本文的讨论重点，有兴趣的读者可以自行查阅。我之所以使用
ox-publish.el ，主要有以下几点原因：
</p>
</div>
<div id="outline-container-兼容性" class="outline-4">
<h4 id="兼容性"><span class="section-number-4">1.1.1.</span> 兼容性</h4>
<div class="outline-text-4" id="text-兼容性">
<p>
我基本上所有的写作活动都是在 Org-mode 里完成的，对 Org-mode 有着比较深度的自定义配置，因此希望能直接基于 org 文件来生成博客。Hugo 虽然号称能够解析 org 格式，但是对于自定义的格式就无能为力了<sup><label for="fnr.1" class="footref">1</label></sup><input id="fnr.1" class="footref-toggle" type="checkbox">，比如说<a href="https://orgmode.org/manual/Adding-Hyperlink-Types.html">自定义的链接格式</a>。而 ox-publish.el 采用的是 Org-mode 自带的导出功能，只需要你自己写好相关格式的导出方式，便可以完美地支持任何 org 文件。
</p>
</div>
</div>
<div id="outline-container-内置" class="outline-4">
<h4 id="内置"><span class="section-number-4">1.1.2.</span> 内置</h4>
<div class="outline-text-4" id="text-内置">
<p>
ox-publish.el 中的 <code>ox</code> 是 <code>org-export</code> 的缩写，从名字就能看出来它是 Org-mode 导出功能的一个模块。因此可以和 Org-mode 的其他功能功能无缝整合，任何需求都能较为简单地实现。内置的另一个好处是我不用担心这个项目后续的发展，只要 Org-mode 还能用，
ox-publish.el 就能用。
</p>
</div>
</div>
<div id="outline-container-可拓展性" class="outline-4">
<h4 id="可拓展性"><span class="section-number-4">1.1.3.</span> 可拓展性</h4>
<div class="outline-text-4" id="text-可拓展性">
<p>
Org-mode 的 <code>ox</code> 模块提供了很多 hook ，比如能够分别在导出前后修改原始文本（的复制）和导出文本。这基本上满足我的绝大部分个性化需求，实在不行我也可以通过 <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html">advice</a> 来修改原有函数，总之可扩展性非常好强。
</p>
</div>
</div>
</div>
<div id="outline-container-blog-structure" class="outline-3">
<h3 id="blog-structure"><span class="section-number-3">1.2.</span> 博客结构</h3>
<div class="outline-text-3" id="text-blog-structure">
<p>
首先介绍一下博客的基本结构
</p>

<pre class="example">
├── articles/
├── config.html
├── css/
│   └── style.css
├── index.html
├── rss.xml
└── scripts/
    └── script.js
    └── toc.js
</pre>

<dl class="org-dl">
<dt>articles</dt><dd>此文件夹包含所有的博客文章</dd>
<dt>css</dt><dd>此文件夹包含所有的 CSS 文件</dd>
<dt>script</dt><dd>此文件夹包含所有的 JS 文件</dd>
<dt>config.html</dt><dd>我的 Emacs 文学编程配置</dd>
<dt>index.html</dt><dd>博客主页</dd>
<dt>rss.xml</dt><dd>RSS 订阅</dd>
</dl>
</div>
</div>
<div id="outline-container-基本配置" class="outline-3">
<h3 id="基本配置"><span class="section-number-3">1.3.</span> 基本配置</h3>
<div class="outline-text-3" id="text-基本配置">
<p>
ox-publish.el 的配置几乎只用一个变量 <code>org-publish-project-alist</code> 就能完成，非常简单。相关语法和用法请查阅 <code>org-publish-project-alist</code> 的文档和 <a href="https://orgmode.org/manual/Publishing.html">Publishing (The Org
Manual)</a> ，本文将侧重于分享我的个人配置。
</p>

<p>
<code>org-publish-project-alist</code> 中个每个元素就是一个发布项目，其有一个项目名和一个
property list 组成。如 <sup><label for="fnr.2" class="footref">2</label></sup><input id="fnr.2" class="footref-toggle" type="checkbox">：
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>my-blog</div><pre class="src src-emacs-lisp" id="my-blog"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"eli's</span><span class="org-whitespace-space"> </span><span class="org-string">blog"</span>
<span class="org-whitespace-space"> </span>&lt;&lt;<a href="#misc">misc</a>&gt;&gt;

<span class="org-whitespace-space"> </span>&lt;&lt;<a href="#sitemap">sitemap</a>&gt;&gt;

<span class="org-whitespace-space"> </span>&lt;&lt;<a href="#html">html</a>&gt;&gt;
<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"eli's</span><span class="org-whitespace-space"> </span><span class="org-string">blog"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>expand-file-name<span class="org-whitespace-space"> </span><span class="org-string">"articles"</span><span class="org-whitespace-space"> </span>eli/blog-publish-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:recursive</span><span class="org-whitespace-space"> </span>nil
<span class="org-whitespace-space"> </span><span class="org-builtin">:htmlized-source</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-blog-publish-to-html
<span class="org-whitespace-space"> </span><span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>

<span class="org-whitespace-space"> </span><span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-whitespace-space"> </span><span class="org-builtin">:completion-function</span><span class="org-whitespace-space"> </span>eli/blog-publish-completion
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span>,eli/blog-sitamap
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-sitemap
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/sitemap-dated-entry-format

<span class="org-whitespace-space"> </span><span class="org-builtin">:html-head</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;link</span><span class="org-whitespace-space"> </span><span class="org-string">rel=\"stylesheet\"</span><span class="org-whitespace-space"> </span><span class="org-string">type=\"text/css\"</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/css/style.css\"</span><span class="org-whitespace-space"> </span><span class="org-string">/&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/script.js\"&gt;&lt;/script&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/toc.js\"&gt;&lt;/script&gt;"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-preamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-preamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;nav</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"nav\"&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/index.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Home&lt;/a&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/rss.xml\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;RSS&lt;/a&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/config.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Literate</span><span class="org-whitespace-space"> </span><span class="org-string">Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">Config&lt;/a&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;/nav&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;hr&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-postamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-postamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;hr</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"Solid\"&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"info\"&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"author\"&gt;Author:</span><span class="org-whitespace-space"> </span><span class="org-string">%a</span><span class="org-whitespace-space"> </span><span class="org-string">(%e)&lt;/span&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Create</span><span class="org-whitespace-space"> </span><span class="org-string">Date:</span><span class="org-whitespace-space"> </span><span class="org-string">%d&lt;/span&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Last</span><span class="org-whitespace-space"> </span><span class="org-string">modified:</span><span class="org-whitespace-space"> </span><span class="org-string">%C&lt;/span&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;span&gt;Creator:</span><span class="org-whitespace-space"> </span><span class="org-string">%c&lt;/span&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;/div&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:with-creator</span><span class="org-whitespace-space"> </span>nil
<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
我们的主要工作就是配置这个 property list 以满足我们不同的需求，接下来的几个部分将介绍我们所使用的属性：
</p>
</div>

<div id="outline-container-杂项部分" class="outline-4">
<h4 id="杂项部分"><span class="section-number-4">1.3.1.</span> 杂项部分</h4>
<div class="outline-text-4" id="text-杂项部分">
<p>
首先我们来定义一些辅助函数：
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>blog-helper-functions</div><pre class="src src-emacs-lisp" id="blog-helper-functions"><code>&lt;&lt;<a href="#custom-backend">custom-backend</a>&gt;&gt;

&lt;&lt;<a href="#eli/org-blog-src-block">eli/org-blog-src-block</a>&gt;&gt;

&lt;&lt;<a href="#eli/org-blog-publish-to-html">eli/org-blog-publish-to-html</a>&gt;&gt;

&lt;&lt;<a href="#blog-variables">blog-variables</a>&gt;&gt;

&lt;&lt;<a href="#eli/org-publish-sitemap">eli/org-publish-sitemap</a>&gt;&gt;

&lt;&lt;<a href="#eli/sitemap-dated-entry-format">eli/sitemap-dated-entry-format</a>&gt;&gt;

&lt;&lt;<a href="#timestamp-macro">timestamp-macro</a>&gt;&gt;

&lt;&lt;<a href="#eli/blog-publish-completion">eli/blog-publish-completion</a>&gt;&gt;

&lt;&lt;<a href="#eli/kill-sitemap-buffer">eli/kill-sitemap-buffer</a>&gt;&gt;
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-define-derived-backend<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>'html
<span class="org-whitespace-space">  </span><span class="org-builtin">:translate-alist</span><span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>src-block<span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span>eli/org-blog-src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-src-block</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>src-block<span class="org-whitespace-space"> </span>_contents<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Transcode</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">SRC-BLOCK</span><span class="org-whitespace-space"> </span><span class="org-doc">element</span><span class="org-whitespace-space"> </span><span class="org-doc">from</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>
<span class="org-doc">CONTENTS</span><span class="org-whitespace-space"> </span><span class="org-doc">holds</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">contents</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">item.</span><span class="org-whitespace-space">  </span><span class="org-doc">INFO</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">plist</span><span class="org-whitespace-space"> </span><span class="org-doc">holding</span>
<span class="org-doc">contextual</span><span class="org-whitespace-space"> </span><span class="org-doc">information."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-export-read-attribute<span class="org-whitespace-space"> </span><span class="org-builtin">:attr_html</span><span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span><span class="org-builtin">:textarea</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-html--textarea-block<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>lang<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:language</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>code<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-html-format-code<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>label<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>org-html--reference<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">id=\"%s\""</span><span class="org-whitespace-space"> </span>lbl<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>klipsify<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">and</span><span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>plist-get<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span><span class="org-builtin">:html-klipsify-src</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>member<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-string">"javascript"</span><span class="org-whitespace-space"> </span><span class="org-string">"js"</span>
<span class="org-whitespace-space">                                           </span><span class="org-string">"ruby"</span><span class="org-whitespace-space"> </span><span class="org-string">"scheme"</span><span class="org-whitespace-space"> </span><span class="org-string">"clojure"</span><span class="org-whitespace-space"> </span><span class="org-string">"php"</span><span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>not<span class="org-whitespace-space"> </span>lang<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"example\"%s&gt;&lt;code&gt;\n%s&lt;/code&gt;&lt;/pre&gt;"</span><span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-container\"&gt;\n%s%s\n&lt;/div&gt;"</span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Build</span><span class="org-whitespace-space"> </span><span class="org-comment">caption.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>caption<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-get-caption<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:name</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>not<span class="org-whitespace-space"> </span>caption<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>listing-number
<span class="org-whitespace-space">                           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>format
<span class="org-whitespace-space">                            </span><span class="org-string">"&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"listing-number\"&gt;%s</span><span class="org-whitespace-space"> </span><span class="org-string">&lt;/span&gt;"</span>
<span class="org-whitespace-space">                            </span><span class="org-string">"Listing:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-name\"&gt;%s%s&lt;/div&gt;"</span>
<span class="org-whitespace-space">                              </span>listing-number
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-trim<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-export-data<span class="org-whitespace-space"> </span>caption<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Contents.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>klipsify
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre&gt;&lt;code</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s%s&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                            </span>lang
<span class="org-whitespace-space">                            </span>label
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>string=<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                                </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">data-editor-type=\"html\""</span>
<span class="org-whitespace-space">                              </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span>
<span class="org-whitespace-space">                            </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s&gt;&lt;code&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                          </span>lang<span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-comment-delimiter">;;;</span><span class="org-comment">###</span><span class="org-comment"><span class="org-warning">autoload</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-publish-to-html</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>

<span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">filename</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">be</span><span class="org-whitespace-space"> </span><span class="org-doc">published.</span><span class="org-whitespace-space">  </span><span class="org-doc">PLIST</span>
<span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">property</span><span class="org-whitespace-space"> </span><span class="org-doc">list</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">given</span><span class="org-whitespace-space"> </span><span class="org-doc">project.</span><span class="org-whitespace-space">  </span><span class="org-doc">PUB-DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span>
<span class="org-doc">publishing</span><span class="org-whitespace-space"> </span><span class="org-doc">directory.</span>

<span class="org-doc">Return</span><span class="org-whitespace-space"> </span><span class="org-doc">output</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">name."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-publish-org-to<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>filename
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>&gt;<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>length<span class="org-whitespace-space"> </span>org-html-extension<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">"."</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span><span class="org-builtin">:html-extension</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">                                  </span>org-html-extension
<span class="org-whitespace-space">                                  </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                      </span>plist<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>eli/blog-base-dir<span class="org-whitespace-space"> </span><span class="org-string">"path-to/blog/"</span>
<span class="org-whitespace-space">      </span>eli/blog-publish-dir<span class="org-whitespace-space"> </span><span class="org-string">"your-blog-site-dir"</span>
<span class="org-whitespace-space">      </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">with</span><span class="org-whitespace-space"> </span><span class="org-doc">title."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">          </span><span class="org-string">"\n"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"#+DATE:</span><span class="org-whitespace-space"> </span><span class="org-string">2023-10-10"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-org<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/sitemap-dated-entry-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">STYLE</span><span class="org-whitespace-space"> </span><span class="org-doc">format</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">includes</span><span class="org-whitespace-space"> </span><span class="org-doc">date."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>=<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>length<span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"*%s*"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"{{{timestamp(%s)}}}</span><span class="org-whitespace-space">   </span><span class="org-string">[[file:%s][%s]]"</span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"articles/"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-to-list<span class="org-whitespace-space"> </span>'org-export-global-macros
<span class="org-whitespace-space">             </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"timestamp"</span><span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span><span class="org-string">"@@html:&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/blog-publish-completion</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>publishing-directory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitamap<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>file-name-with-extension<span class="org-whitespace-space"> </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>orig-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitamap<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>target-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name
<span class="org-whitespace-space">                       </span>sitamap
<span class="org-whitespace-space">                       </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-directory<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>rename-file<span class="org-whitespace-space"> </span>orig-file<span class="org-whitespace-space"> </span>target-file<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/kill-sitemap-buffer</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filename<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-filename</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>base-dir<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filepath<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitemap-filename<span class="org-whitespace-space"> </span>base-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">when-let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>sitemap-buffer<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>find-buffer-visiting<span class="org-whitespace-space"> </span>sitemap-filepath<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>kill-buffer<span class="org-whitespace-space"> </span>sitemap-buffer<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
我希望博客的导出和常规 HTML 之间的行为有所区别，所以首先让我们定义一个专门用于博客导出的 org 导出后端 <code>blog</code> ，这是为了方便修改<code>html</code> 后端的默认行为，比如说我们可以修改对 org-mode 中代码块的处理：由于我采用的是文学编程，所以希望在没有
<code>caption</code>的时候用代码块的 <code>name</code> 属性来作为代码块的标签。
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>custom-backend</div><pre class="src src-emacs-lisp" id="custom-backend"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-define-derived-backend<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>'html
<span class="org-whitespace-space">  </span><span class="org-builtin">:translate-alist</span><span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>src-block<span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span>eli/org-blog-src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-define-derived-backend<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>'html
<span class="org-whitespace-space">  </span><span class="org-builtin">:translate-alist</span><span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>src-block<span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span>eli/org-blog-src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/org-blog-src-block</div><pre class="src src-emacs-lisp" id="eli/org-blog-src-block"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-src-block</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>src-block<span class="org-whitespace-space"> </span>_contents<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Transcode</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">SRC-BLOCK</span><span class="org-whitespace-space"> </span><span class="org-doc">element</span><span class="org-whitespace-space"> </span><span class="org-doc">from</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>
<span class="org-doc">CONTENTS</span><span class="org-whitespace-space"> </span><span class="org-doc">holds</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">contents</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">item.</span><span class="org-whitespace-space">  </span><span class="org-doc">INFO</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">plist</span><span class="org-whitespace-space"> </span><span class="org-doc">holding</span>
<span class="org-doc">contextual</span><span class="org-whitespace-space"> </span><span class="org-doc">information."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-export-read-attribute<span class="org-whitespace-space"> </span><span class="org-builtin">:attr_html</span><span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span><span class="org-builtin">:textarea</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-html--textarea-block<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>lang<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:language</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>code<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-html-format-code<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>label<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>org-html--reference<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">id=\"%s\""</span><span class="org-whitespace-space"> </span>lbl<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>klipsify<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">and</span><span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>plist-get<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span><span class="org-builtin">:html-klipsify-src</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>member<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-string">"javascript"</span><span class="org-whitespace-space"> </span><span class="org-string">"js"</span>
<span class="org-whitespace-space">                                           </span><span class="org-string">"ruby"</span><span class="org-whitespace-space"> </span><span class="org-string">"scheme"</span><span class="org-whitespace-space"> </span><span class="org-string">"clojure"</span><span class="org-whitespace-space"> </span><span class="org-string">"php"</span><span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>not<span class="org-whitespace-space"> </span>lang<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"example\"%s&gt;&lt;code&gt;\n%s&lt;/code&gt;&lt;/pre&gt;"</span><span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-container\"&gt;\n%s%s\n&lt;/div&gt;"</span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Build</span><span class="org-whitespace-space"> </span><span class="org-comment">caption.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>caption<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-get-caption<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:name</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>not<span class="org-whitespace-space"> </span>caption<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>listing-number
<span class="org-whitespace-space">                           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>format
<span class="org-whitespace-space">                            </span><span class="org-string">"&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"listing-number\"&gt;%s</span><span class="org-whitespace-space"> </span><span class="org-string">&lt;/span&gt;"</span>
<span class="org-whitespace-space">                            </span><span class="org-string">"Listing:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-name\"&gt;%s%s&lt;/div&gt;"</span>
<span class="org-whitespace-space">                              </span>listing-number
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-trim<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-export-data<span class="org-whitespace-space"> </span>caption<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Contents.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>klipsify
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre&gt;&lt;code</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s%s&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                            </span>lang
<span class="org-whitespace-space">                            </span>label
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>string=<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                                </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">data-editor-type=\"html\""</span>
<span class="org-whitespace-space">                              </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span>
<span class="org-whitespace-space">                            </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s&gt;&lt;code&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                          </span>lang<span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-src-block</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>src-block<span class="org-whitespace-space"> </span>_contents<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Transcode</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">SRC-BLOCK</span><span class="org-whitespace-space"> </span><span class="org-doc">element</span><span class="org-whitespace-space"> </span><span class="org-doc">from</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>
<span class="org-doc">CONTENTS</span><span class="org-whitespace-space"> </span><span class="org-doc">holds</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">contents</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">item.</span><span class="org-whitespace-space">  </span><span class="org-doc">INFO</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">plist</span><span class="org-whitespace-space"> </span><span class="org-doc">holding</span>
<span class="org-doc">contextual</span><span class="org-whitespace-space"> </span><span class="org-doc">information."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-export-read-attribute<span class="org-whitespace-space"> </span><span class="org-builtin">:attr_html</span><span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span><span class="org-builtin">:textarea</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-html--textarea-block<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>lang<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:language</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>code<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-html-format-code<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>label<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>org-html--reference<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">id=\"%s\""</span><span class="org-whitespace-space"> </span>lbl<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>klipsify<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">and</span><span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>plist-get<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span><span class="org-builtin">:html-klipsify-src</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>member<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-string">"javascript"</span><span class="org-whitespace-space"> </span><span class="org-string">"js"</span>
<span class="org-whitespace-space">                                           </span><span class="org-string">"ruby"</span><span class="org-whitespace-space"> </span><span class="org-string">"scheme"</span><span class="org-whitespace-space"> </span><span class="org-string">"clojure"</span><span class="org-whitespace-space"> </span><span class="org-string">"php"</span><span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>not<span class="org-whitespace-space"> </span>lang<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"example\"%s&gt;&lt;code&gt;\n%s&lt;/code&gt;&lt;/pre&gt;"</span><span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-container\"&gt;\n%s%s\n&lt;/div&gt;"</span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Build</span><span class="org-whitespace-space"> </span><span class="org-comment">caption.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>caption<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-get-caption<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:name</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>not<span class="org-whitespace-space"> </span>caption<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>listing-number
<span class="org-whitespace-space">                           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>format
<span class="org-whitespace-space">                            </span><span class="org-string">"&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"listing-number\"&gt;%s</span><span class="org-whitespace-space"> </span><span class="org-string">&lt;/span&gt;"</span>
<span class="org-whitespace-space">                            </span><span class="org-string">"Listing:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-name\"&gt;%s%s&lt;/div&gt;"</span>
<span class="org-whitespace-space">                              </span>listing-number
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-trim<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-export-data<span class="org-whitespace-space"> </span>caption<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Contents.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>klipsify
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre&gt;&lt;code</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s%s&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                            </span>lang
<span class="org-whitespace-space">                            </span>label
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>string=<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                                </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">data-editor-type=\"html\""</span>
<span class="org-whitespace-space">                              </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span>
<span class="org-whitespace-space">                            </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s&gt;&lt;code&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                          </span>lang<span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
接下来我们需要为 ox-publish 定义一个导出后端为 <code>blog</code> 的发布函数：
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/org-blog-publish-to-html</div><pre class="src src-emacs-lisp" id="eli/org-blog-publish-to-html"><code><span class="org-comment-delimiter">;;;</span><span class="org-comment">###</span><span class="org-comment"><span class="org-warning">autoload</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-publish-to-html</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>

<span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">filename</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">be</span><span class="org-whitespace-space"> </span><span class="org-doc">published.</span><span class="org-whitespace-space">  </span><span class="org-doc">PLIST</span>
<span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">property</span><span class="org-whitespace-space"> </span><span class="org-doc">list</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">given</span><span class="org-whitespace-space"> </span><span class="org-doc">project.</span><span class="org-whitespace-space">  </span><span class="org-doc">PUB-DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span>
<span class="org-doc">publishing</span><span class="org-whitespace-space"> </span><span class="org-doc">directory.</span>

<span class="org-doc">Return</span><span class="org-whitespace-space"> </span><span class="org-doc">output</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">name."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-publish-org-to<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>filename
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>&gt;<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>length<span class="org-whitespace-space"> </span>org-html-extension<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">"."</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span><span class="org-builtin">:html-extension</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">                                  </span>org-html-extension
<span class="org-whitespace-space">                                  </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                      </span>plist<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-comment-delimiter">;;;</span><span class="org-comment">###</span><span class="org-comment"><span class="org-warning">autoload</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-publish-to-html</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>

<span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">filename</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">be</span><span class="org-whitespace-space"> </span><span class="org-doc">published.</span><span class="org-whitespace-space">  </span><span class="org-doc">PLIST</span>
<span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">property</span><span class="org-whitespace-space"> </span><span class="org-doc">list</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">given</span><span class="org-whitespace-space"> </span><span class="org-doc">project.</span><span class="org-whitespace-space">  </span><span class="org-doc">PUB-DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span>
<span class="org-doc">publishing</span><span class="org-whitespace-space"> </span><span class="org-doc">directory.</span>

<span class="org-doc">Return</span><span class="org-whitespace-space"> </span><span class="org-doc">output</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">name."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-publish-org-to<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>filename
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>&gt;<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>length<span class="org-whitespace-space"> </span>org-html-extension<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">"."</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span><span class="org-builtin">:html-extension</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">                                  </span>org-html-extension
<span class="org-whitespace-space">                                  </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                      </span>plist<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
为了方便后续的编辑，我们定义如下几个变量：
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>blog-variables</div><pre class="src src-emacs-lisp" id="blog-variables"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>eli/blog-base-dir<span class="org-whitespace-space"> </span><span class="org-string">"path-to/blog/"</span>
<span class="org-whitespace-space">      </span>eli/blog-publish-dir<span class="org-whitespace-space"> </span><span class="org-string">"your-blog-site-dir"</span>
<span class="org-whitespace-space">      </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>eli/blog-base-dir<span class="org-whitespace-space"> </span><span class="org-string">"path-to/blog/"</span>
<span class="org-whitespace-space">      </span>eli/blog-publish-dir<span class="org-whitespace-space"> </span><span class="org-string">"your-blog-site-dir"</span>
<span class="org-whitespace-space">      </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
至此，property list 中的杂项部分就完成了，下面这些未指出的属性读者可以查阅
<a href="https://orgmode.org/manual/Publishing.html">Publishing (The Org Manual)</a> 等文档，这里就不一一说明了。
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>misc</div><pre class="src src-emacs-lisp" id="misc"><code><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>expand-file-name<span class="org-whitespace-space"> </span><span class="org-string">"articles"</span><span class="org-whitespace-space"> </span>eli/blog-publish-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-builtin">:recursive</span><span class="org-whitespace-space"> </span>nil
<span class="org-builtin">:htmlized-source</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-blog-publish-to-html
<span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>expand-file-name<span class="org-whitespace-space"> </span><span class="org-string">"articles"</span><span class="org-whitespace-space"> </span>eli/blog-publish-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-builtin">:recursive</span><span class="org-whitespace-space"> </span>nil
<span class="org-builtin">:htmlized-source</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-blog-publish-to-html
<span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>
</code></pre>
</div>

</div>
</div>
</div>

<div id="outline-container-HTML-部分" class="outline-4">
<h4 id="HTML-部分"><span class="section-number-4">1.3.2.</span> HTML 部分</h4>
<div class="outline-text-4" id="text-HTML-部分">
<p>
org 文件导出后的 HTML 主要由 <code>preamble</code> 、<code>content</code> 和 <code>postamble</code> 三个部分组成，我们的文章内容填充的是 <code>content</code> 部分，其他两个部分由变量 <code>org-html-preamble</code> 、
<code>org-html-preamble-format</code> 、 <code>org-html-postamble</code> 和 <code>org-html-postamble-format</code> 分别控制。其具体用途可任由读者发挥，这里我们将 <code>preamle</code> 用做导航栏，而 <code>postamble</code> 则用作提供文章信息。
</p>

<p>
导航栏是几个很简单的标签<sup><label for="fnr.3" class="footref">3</label></sup><input id="fnr.3" class="footref-toggle" type="checkbox">：
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>preamble</div><pre class="src src-emacs-lisp" id="preamble"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;nav</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"nav\"&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/index.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Home&lt;/a&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/rss.xml\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;RSS&lt;/a&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/config.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Literate</span><span class="org-whitespace-space"> </span><span class="org-string">Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">Config&lt;/a&gt;</span>
<span class="org-string">&lt;/nav&gt;</span>
<span class="org-string">&lt;hr&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;nav</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"nav\"&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/index.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Home&lt;/a&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/rss.xml\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;RSS&lt;/a&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/config.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Literate</span><span class="org-whitespace-space"> </span><span class="org-string">Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">Config&lt;/a&gt;</span>
<span class="org-string">&lt;/nav&gt;</span>
<span class="org-string">&lt;hr&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
postamble 则提供了作者、创建时间和修改时间等信息<sup><label for="fnr.4" class="footref">4</label></sup><input id="fnr.4" class="footref-toggle" type="checkbox">：
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>postamble</div><pre class="src src-emacs-lisp" id="postamble"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;hr</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"Solid\"&gt;</span>
<span class="org-string">&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"info\"&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"author\"&gt;Author:</span><span class="org-whitespace-space"> </span><span class="org-string">%a</span><span class="org-whitespace-space"> </span><span class="org-string">(%e)&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Create</span><span class="org-whitespace-space"> </span><span class="org-string">Date:</span><span class="org-whitespace-space"> </span><span class="org-string">%d&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Last</span><span class="org-whitespace-space"> </span><span class="org-string">modified:</span><span class="org-whitespace-space"> </span><span class="org-string">%C&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span&gt;Creator:</span><span class="org-whitespace-space"> </span><span class="org-string">%c&lt;/span&gt;</span>
<span class="org-string">&lt;/div&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;hr</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"Solid\"&gt;</span>
<span class="org-string">&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"info\"&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"author\"&gt;Author:</span><span class="org-whitespace-space"> </span><span class="org-string">%a</span><span class="org-whitespace-space"> </span><span class="org-string">(%e)&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Create</span><span class="org-whitespace-space"> </span><span class="org-string">Date:</span><span class="org-whitespace-space"> </span><span class="org-string">%d&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Last</span><span class="org-whitespace-space"> </span><span class="org-string">modified:</span><span class="org-whitespace-space"> </span><span class="org-string">%C&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span&gt;Creator:</span><span class="org-whitespace-space"> </span><span class="org-string">%c&lt;/span&gt;</span>
<span class="org-string">&lt;/div&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
此外，我们还可以为导出的 HTML 提供 CSS 和 JS 文件，以获取更舒适的浏览体验<sup><label for="fnr.5" class="footref">5</label></sup><input id="fnr.5" class="footref-toggle" type="checkbox">：
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>head</div><pre class="src src-emacs-lisp" id="head"><code><span class="org-string">"&lt;link</span><span class="org-whitespace-space"> </span><span class="org-string">rel=\"stylesheet\"</span><span class="org-whitespace-space"> </span><span class="org-string">type=\"text/css\"</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/css/style.css\"</span><span class="org-whitespace-space"> </span><span class="org-string">/&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/script.js\"&gt;&lt;/script&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/toc.js\"&gt;&lt;/script&gt;"</span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-string">"&lt;link</span><span class="org-whitespace-space"> </span><span class="org-string">rel=\"stylesheet\"</span><span class="org-whitespace-space"> </span><span class="org-string">type=\"text/css\"</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/css/style.css\"</span><span class="org-whitespace-space"> </span><span class="org-string">/&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/script.js\"&gt;&lt;/script&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/toc.js\"&gt;&lt;/script&gt;"</span>
</code></pre>
</div>

</div>


<p>
至此，property list 中的 HTML 部分就大致完成了：
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>html</div><pre class="src src-emacs-lisp" id="html"><code><span class="org-builtin">:html-head</span><span class="org-whitespace-space"> </span>&lt;&lt;<a href="#head">head</a>&gt;&gt;
<span class="org-builtin">:html-preamble</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:html-preamble-format</span><span class="org-whitespace-space"> </span>&lt;&lt;<a href="#preamble">preamble</a>&gt;&gt;
<span class="org-builtin">:html-postamble</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:html-postamble-format</span><span class="org-whitespace-space"> </span>&lt;&lt;<a href="#postamble">postamble</a>&gt;&gt;
<span class="org-builtin">:with-creator</span><span class="org-whitespace-space"> </span>nil
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-builtin">:html-head</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;link</span><span class="org-whitespace-space"> </span><span class="org-string">rel=\"stylesheet\"</span><span class="org-whitespace-space"> </span><span class="org-string">type=\"text/css\"</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/css/style.css\"</span><span class="org-whitespace-space"> </span><span class="org-string">/&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/script.js\"&gt;&lt;/script&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/toc.js\"&gt;&lt;/script&gt;"</span>
<span class="org-builtin">:html-preamble</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:html-preamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;nav</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"nav\"&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/index.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Home&lt;/a&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/rss.xml\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;RSS&lt;/a&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/config.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Literate</span><span class="org-whitespace-space"> </span><span class="org-string">Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">Config&lt;/a&gt;</span>
<span class="org-string">&lt;/nav&gt;</span>
<span class="org-string">&lt;hr&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-builtin">:html-postamble</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:html-postamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;hr</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"Solid\"&gt;</span>
<span class="org-string">&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"info\"&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"author\"&gt;Author:</span><span class="org-whitespace-space"> </span><span class="org-string">%a</span><span class="org-whitespace-space"> </span><span class="org-string">(%e)&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Create</span><span class="org-whitespace-space"> </span><span class="org-string">Date:</span><span class="org-whitespace-space"> </span><span class="org-string">%d&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Last</span><span class="org-whitespace-space"> </span><span class="org-string">modified:</span><span class="org-whitespace-space"> </span><span class="org-string">%C&lt;/span&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;span&gt;Creator:</span><span class="org-whitespace-space"> </span><span class="org-string">%c&lt;/span&gt;</span>
<span class="org-string">&lt;/div&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-builtin">:with-creator</span><span class="org-whitespace-space"> </span>nil
</code></pre>
</div>

</div>
</div>
</div>

<div id="outline-container-sitemap-部分" class="outline-4">
<h4 id="sitemap-部分"><span class="section-number-4">1.3.3.</span> sitemap 部分</h4>
<div class="outline-text-4" id="text-sitemap-部分">
<p>
sitemap 就是站点地图，其中列举了项目中的所有文章链接，这样通过 sitemap 就可以访问全部的文章内容。因此我们可以把 sitemap 稍作修改，用作我们博客的主页。
</p>

<p>
首先我们为博客主页固定一个创建时间：
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/org-publish-sitemap</div><pre class="src src-emacs-lisp" id="eli/org-publish-sitemap"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">with</span><span class="org-whitespace-space"> </span><span class="org-doc">title."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">          </span><span class="org-string">"\n"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"#+DATE:</span><span class="org-whitespace-space"> </span><span class="org-string">2023-10-10"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-org<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">with</span><span class="org-whitespace-space"> </span><span class="org-doc">title."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">          </span><span class="org-string">"\n"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"#+DATE:</span><span class="org-whitespace-space"> </span><span class="org-string">2023-10-10"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-org<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
其次我们可以为 sitemap 中的每一个 entry 添加时间前缀：
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/sitemap-dated-entry-format</div><pre class="src src-emacs-lisp" id="eli/sitemap-dated-entry-format"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/sitemap-dated-entry-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">STYLE</span><span class="org-whitespace-space"> </span><span class="org-doc">format</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">includes</span><span class="org-whitespace-space"> </span><span class="org-doc">date."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>=<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>length<span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"*%s*"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"{{{timestamp(%s)}}}</span><span class="org-whitespace-space">   </span><span class="org-string">[[file:%s][%s]]"</span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"articles/"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/sitemap-dated-entry-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">STYLE</span><span class="org-whitespace-space"> </span><span class="org-doc">format</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">includes</span><span class="org-whitespace-space"> </span><span class="org-doc">date."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>=<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>length<span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"*%s*"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"{{{timestamp(%s)}}}</span><span class="org-whitespace-space">   </span><span class="org-string">[[file:%s][%s]]"</span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"articles/"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
注意 <code>eli/sitemap-dated-entry-format</code> 里的 <code>{{{timestamp(%s)}}}</code> 是一个导出宏：
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>timestamp-macro</div><pre class="src src-emacs-lisp" id="timestamp-macro"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-to-list<span class="org-whitespace-space"> </span>'org-export-global-macros
<span class="org-whitespace-space">             </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"timestamp"</span><span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span><span class="org-string">"@@html:&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-to-list<span class="org-whitespace-space"> </span>'org-export-global-macros
<span class="org-whitespace-space">             </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"timestamp"</span><span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span><span class="org-string">"@@html:&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
一般情况下 sitemap 会和同一 <code>:base-directory</code> 目录下的其他文件一起导出到
<code>:publishing-directory</code> ，但从<a href="#blog-structure">博客结构</a>一节可以看出，我们希望把 sitemap 导出到博客的根目录来充当主页，所以需要利用 <code>:completion-function</code> 属性来在导出完成后把
sitemap 移到根目录
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/blog-publish-completion</div><pre class="src src-emacs-lisp" id="eli/blog-publish-completion"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/blog-publish-completion</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>publishing-directory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitamap<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>file-name-with-extension<span class="org-whitespace-space"> </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>orig-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitamap<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>target-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name
<span class="org-whitespace-space">                       </span>sitamap
<span class="org-whitespace-space">                       </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-directory<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>rename-file<span class="org-whitespace-space"> </span>orig-file<span class="org-whitespace-space"> </span>target-file<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/blog-publish-completion</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>publishing-directory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitamap<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>file-name-with-extension<span class="org-whitespace-space"> </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>orig-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitamap<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>target-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name
<span class="org-whitespace-space">                       </span>sitamap
<span class="org-whitespace-space">                       </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-directory<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>rename-file<span class="org-whitespace-space"> </span>orig-file<span class="org-whitespace-space"> </span>target-file<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
最后还有一点需要注意，在 ox-publish.el 的实现过程中，ox-publish 会优先使用正在访问博客文件的 buffer 来作为导出的来源，这在一般情况下没什么问题，但是如果你在导出前在 buffera 打开了 sitemap 文件，那么 ox-publish 就会在重新生成 sitemap 后继续使用 buffera 中的内容。此时的行为会受 <code>auto-revert</code> 或其他相关设置的影响，比如说此时 <code>auto-revert-timer</code> 的定时还没有到，那么 ox-publish 就会使用旧的 sitemap 内容。这不是我们想要的，所以我的方案是在导出前关闭访问 sitemap 的 buffer ，反正
sitemap 是自动生成的，我们也不需要修改。
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/kill-sitemap-buffer</div><pre class="src src-emacs-lisp" id="eli/kill-sitemap-buffer"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/kill-sitemap-buffer</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filename<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-filename</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>base-dir<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filepath<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitemap-filename<span class="org-whitespace-space"> </span>base-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">when-let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>sitemap-buffer<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>find-buffer-visiting<span class="org-whitespace-space"> </span>sitemap-filepath<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>kill-buffer<span class="org-whitespace-space"> </span>sitemap-buffer<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/kill-sitemap-buffer</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filename<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-filename</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>base-dir<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filepath<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitemap-filename<span class="org-whitespace-space"> </span>base-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">when-let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>sitemap-buffer<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>find-buffer-visiting<span class="org-whitespace-space"> </span>sitemap-filepath<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>kill-buffer<span class="org-whitespace-space"> </span>sitemap-buffer<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
至此，一个基本的博客主页就完成了，下面是相应的属性：
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>sitemap</div><pre class="src src-emacs-lisp" id="sitemap"><code><span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-builtin">:completion-function</span><span class="org-whitespace-space"> </span>eli/blog-publish-completion
<span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span>,eli/blog-sitamap
<span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-sitemap
<span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/sitemap-dated-entry-format
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-builtin">:completion-function</span><span class="org-whitespace-space"> </span>eli/blog-publish-completion
<span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span>,eli/blog-sitamap
<span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-sitemap
<span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/sitemap-dated-entry-format
</code></pre>
</div>

</div>
</div>
</div>

<div id="outline-container-本章总结" class="outline-4">
<h4 id="本章总结"><span class="section-number-4">1.3.4.</span> 本章总结</h4>
<div class="outline-text-4" id="text-本章总结">
<p>
现在我们已经介绍完了所有需要的属性，接下来让我们让我们把这些属性合到一起，加上名字组成一个完整的 project 。至此，一个简单的博客导出工具就完成了：
</p>
<div class="multilang">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code>&lt;&lt;<a href="#blog-helper-functions">blog-helper-functions</a>&gt;&gt;

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>org-publish-project-alist<span class="org-whitespace-space"> </span>`<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>
<span class="org-whitespace-space">                                  </span>&lt;&lt;<a href="#my-blog">my-blog</a>&gt;&gt;
<span class="org-whitespace-space">                                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-define-derived-backend<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>'html
<span class="org-whitespace-space">  </span><span class="org-builtin">:translate-alist</span><span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>src-block<span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span>eli/org-blog-src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-src-block</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>src-block<span class="org-whitespace-space"> </span>_contents<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Transcode</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">SRC-BLOCK</span><span class="org-whitespace-space"> </span><span class="org-doc">element</span><span class="org-whitespace-space"> </span><span class="org-doc">from</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>
<span class="org-doc">CONTENTS</span><span class="org-whitespace-space"> </span><span class="org-doc">holds</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">contents</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">item.</span><span class="org-whitespace-space">  </span><span class="org-doc">INFO</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">plist</span><span class="org-whitespace-space"> </span><span class="org-doc">holding</span>
<span class="org-doc">contextual</span><span class="org-whitespace-space"> </span><span class="org-doc">information."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-export-read-attribute<span class="org-whitespace-space"> </span><span class="org-builtin">:attr_html</span><span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span><span class="org-builtin">:textarea</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-html--textarea-block<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>lang<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:language</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>code<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-html-format-code<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>label<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>org-html--reference<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">id=\"%s\""</span><span class="org-whitespace-space"> </span>lbl<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>klipsify<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">and</span><span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>plist-get<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span><span class="org-builtin">:html-klipsify-src</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>member<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-string">"javascript"</span><span class="org-whitespace-space"> </span><span class="org-string">"js"</span>
<span class="org-whitespace-space">                                           </span><span class="org-string">"ruby"</span><span class="org-whitespace-space"> </span><span class="org-string">"scheme"</span><span class="org-whitespace-space"> </span><span class="org-string">"clojure"</span><span class="org-whitespace-space"> </span><span class="org-string">"php"</span><span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>not<span class="org-whitespace-space"> </span>lang<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"example\"%s&gt;&lt;code&gt;\n%s&lt;/code&gt;&lt;/pre&gt;"</span><span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-container\"&gt;\n%s%s\n&lt;/div&gt;"</span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Build</span><span class="org-whitespace-space"> </span><span class="org-comment">caption.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>caption<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-get-caption<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:name</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>not<span class="org-whitespace-space"> </span>caption<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>listing-number
<span class="org-whitespace-space">                           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>format
<span class="org-whitespace-space">                            </span><span class="org-string">"&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"listing-number\"&gt;%s</span><span class="org-whitespace-space"> </span><span class="org-string">&lt;/span&gt;"</span>
<span class="org-whitespace-space">                            </span><span class="org-string">"Listing:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-name\"&gt;%s%s&lt;/div&gt;"</span>
<span class="org-whitespace-space">                              </span>listing-number
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-trim<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-export-data<span class="org-whitespace-space"> </span>caption<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Contents.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>klipsify
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre&gt;&lt;code</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s%s&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                            </span>lang
<span class="org-whitespace-space">                            </span>label
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>string=<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                                </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">data-editor-type=\"html\""</span>
<span class="org-whitespace-space">                              </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span>
<span class="org-whitespace-space">                            </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s&gt;&lt;code&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                          </span>lang<span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-comment-delimiter">;;;</span><span class="org-comment">###</span><span class="org-comment"><span class="org-warning">autoload</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-publish-to-html</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>

<span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">filename</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">be</span><span class="org-whitespace-space"> </span><span class="org-doc">published.</span><span class="org-whitespace-space">  </span><span class="org-doc">PLIST</span>
<span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">property</span><span class="org-whitespace-space"> </span><span class="org-doc">list</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">given</span><span class="org-whitespace-space"> </span><span class="org-doc">project.</span><span class="org-whitespace-space">  </span><span class="org-doc">PUB-DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span>
<span class="org-doc">publishing</span><span class="org-whitespace-space"> </span><span class="org-doc">directory.</span>

<span class="org-doc">Return</span><span class="org-whitespace-space"> </span><span class="org-doc">output</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">name."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-publish-org-to<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>filename
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>&gt;<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>length<span class="org-whitespace-space"> </span>org-html-extension<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">"."</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span><span class="org-builtin">:html-extension</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">                                  </span>org-html-extension
<span class="org-whitespace-space">                                  </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                      </span>plist<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>eli/blog-base-dir<span class="org-whitespace-space"> </span><span class="org-string">"path-to/blog/"</span>
<span class="org-whitespace-space">      </span>eli/blog-publish-dir<span class="org-whitespace-space"> </span><span class="org-string">"your-blog-site-dir"</span>
<span class="org-whitespace-space">      </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">with</span><span class="org-whitespace-space"> </span><span class="org-doc">title."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">          </span><span class="org-string">"\n"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"#+DATE:</span><span class="org-whitespace-space"> </span><span class="org-string">2023-10-10"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-org<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/sitemap-dated-entry-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">STYLE</span><span class="org-whitespace-space"> </span><span class="org-doc">format</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">includes</span><span class="org-whitespace-space"> </span><span class="org-doc">date."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>=<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>length<span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"*%s*"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"{{{timestamp(%s)}}}</span><span class="org-whitespace-space">   </span><span class="org-string">[[file:%s][%s]]"</span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"articles/"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-to-list<span class="org-whitespace-space"> </span>'org-export-global-macros
<span class="org-whitespace-space">             </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"timestamp"</span><span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span><span class="org-string">"@@html:&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/blog-publish-completion</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>publishing-directory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitamap<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>file-name-with-extension<span class="org-whitespace-space"> </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>orig-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitamap<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>target-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name
<span class="org-whitespace-space">                       </span>sitamap
<span class="org-whitespace-space">                       </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-directory<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>rename-file<span class="org-whitespace-space"> </span>orig-file<span class="org-whitespace-space"> </span>target-file<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/kill-sitemap-buffer</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filename<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-filename</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>base-dir<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filepath<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitemap-filename<span class="org-whitespace-space"> </span>base-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">when-let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>sitemap-buffer<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>find-buffer-visiting<span class="org-whitespace-space"> </span>sitemap-filepath<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>kill-buffer<span class="org-whitespace-space"> </span>sitemap-buffer<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>org-publish-project-alist<span class="org-whitespace-space"> </span>`<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>
<span class="org-whitespace-space">                                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-string">"eli's</span><span class="org-whitespace-space"> </span><span class="org-string">blog"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>expand-file-name<span class="org-whitespace-space"> </span><span class="org-string">"articles"</span><span class="org-whitespace-space"> </span>eli/blog-publish-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:recursive</span><span class="org-whitespace-space"> </span>nil
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:htmlized-source</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-blog-publish-to-html
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>

<span class="org-whitespace-space">                                   </span><span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:completion-function</span><span class="org-whitespace-space"> </span>eli/blog-publish-completion
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span>,eli/blog-sitamap
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-sitemap
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/sitemap-dated-entry-format

<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-head</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;link</span><span class="org-whitespace-space"> </span><span class="org-string">rel=\"stylesheet\"</span><span class="org-whitespace-space"> </span><span class="org-string">type=\"text/css\"</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/css/style.css\"</span><span class="org-whitespace-space"> </span><span class="org-string">/&gt;</span>
<span class="org-whitespace-space">                                    </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/script.js\"&gt;&lt;/script&gt;</span>
<span class="org-whitespace-space">                                    </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/toc.js\"&gt;&lt;/script&gt;"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-preamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-preamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;nav</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"nav\"&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/index.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Home&lt;/a&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/rss.xml\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;RSS&lt;/a&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/config.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Literate</span><span class="org-whitespace-space"> </span><span class="org-string">Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">Config&lt;/a&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;/nav&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;hr&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-postamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-postamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;hr</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"Solid\"&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"info\"&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"author\"&gt;Author:</span><span class="org-whitespace-space"> </span><span class="org-string">%a</span><span class="org-whitespace-space"> </span><span class="org-string">(%e)&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Create</span><span class="org-whitespace-space"> </span><span class="org-string">Date:</span><span class="org-whitespace-space"> </span><span class="org-string">%d&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Last</span><span class="org-whitespace-space"> </span><span class="org-string">modified:</span><span class="org-whitespace-space"> </span><span class="org-string">%C&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span&gt;Creator:</span><span class="org-whitespace-space"> </span><span class="org-string">%c&lt;/span&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;/div&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:with-creator</span><span class="org-whitespace-space"> </span>nil
<span class="org-whitespace-space">                                   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>
</div>
</div>
</div>
</div>

<div id="outline-container-RSS-生成" class="outline-2">
<h2 id="RSS-生成"><span class="section-number-2">2.</span> RSS 生成</h2>
<div class="outline-text-2" id="text-RSS-生成">
<p>
RSS 对于一个博客来说是比较重要的，可惜的是 ox-publish.el 没有原生功能支持。不过好在有 <a href="https://github.com/BenedictHW/ox-rss">GitHub - BenedictHW/ox-rss</a> 。然而 ox-rss 也有缺点，它只能用于单个文件里的
headlines 。因此我们需要曲线救国，新建一个 publish 项目，使用 sitemap 来收集 RSS
entry ，生成一个 rss.org，最后把他导出成我们需要的 rss.xml 。
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/org-publish-rss-entry</div><pre class="src src-emacs-lisp" id="eli/org-publish-rss-entry"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-entry</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Format</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>preview<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>eli/blog-get-preview<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>root<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-property<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>link<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat
<span class="org-whitespace-space">                </span><span class="org-string">"articles/"</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">".html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>pubdate<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"%s</span>
<span class="org-string">:properties:</span>
<span class="org-string">:rss_permalink:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:pubdate:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:end:\n%s\n[[%s][Read</span><span class="org-whitespace-space"> </span><span class="org-string">More]]"</span>
<span class="org-whitespace-space">            </span>title
<span class="org-whitespace-space">            </span>link
<span class="org-whitespace-space">            </span>pubdate
<span class="org-whitespace-space">            </span>preview
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>concat
<span class="org-whitespace-space">             </span>root
<span class="org-whitespace-space">             </span>link<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-entry</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Format</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>preview<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>eli/blog-get-preview<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>root<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-property<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>link<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat
<span class="org-whitespace-space">                </span><span class="org-string">"articles/"</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">".html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>pubdate<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"%s</span>
<span class="org-string">:properties:</span>
<span class="org-string">:rss_permalink:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:pubdate:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:end:\n%s\n[[%s][Read</span><span class="org-whitespace-space"> </span><span class="org-string">More]]"</span>
<span class="org-whitespace-space">            </span>title
<span class="org-whitespace-space">            </span>link
<span class="org-whitespace-space">            </span>pubdate
<span class="org-whitespace-space">            </span>preview
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>concat
<span class="org-whitespace-space">             </span>root
<span class="org-whitespace-space">             </span>link<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/org-publish-rss-sitemap</div><pre class="src src-emacs-lisp" id="eli/org-publish-rss-sitemap"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">exported</span><span class="org-whitespace-space"> </span><span class="org-doc">as</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span>
<span class="org-doc">TITLE</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">title</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span><span class="org-whitespace-space">  </span><span class="org-doc">LIST</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">internal</span>
<span class="org-doc">representation</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">files</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">include.</span><span class="org-whitespace-space">  </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span>
<span class="org-doc">project."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat
<span class="org-whitespace-space">   </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">   </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-subtree<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">exported</span><span class="org-whitespace-space"> </span><span class="org-doc">as</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span>
<span class="org-doc">TITLE</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">title</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span><span class="org-whitespace-space">  </span><span class="org-doc">LIST</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">internal</span>
<span class="org-doc">representation</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">files</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">include.</span><span class="org-whitespace-space">  </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span>
<span class="org-doc">project."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat
<span class="org-whitespace-space">   </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">   </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-subtree<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/org-publish-rss-feed</div><pre class="src src-emacs-lisp" id="eli/org-publish-rss-feed"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-feed</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">PLIST</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">Rss</span><span class="org-whitespace-space"> </span><span class="org-doc">when</span><span class="org-whitespace-space"> </span><span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">rss.org.</span>
<span class="org-doc">DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">location</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">output."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>equal<span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span>filename<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-rss-publish-to-rss<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-feed</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">PLIST</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">Rss</span><span class="org-whitespace-space"> </span><span class="org-doc">when</span><span class="org-whitespace-space"> </span><span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">rss.org.</span>
<span class="org-doc">DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">location</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">output."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>equal<span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span>filename<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-rss-publish-to-rss<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>rss-sitemap</div><pre class="src src-emacs-lisp" id="rss-sitemap"><code><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-feed
<span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-sitemap
<span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>
<span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-entry
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-feed
<span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-sitemap
<span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>
<span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-entry
</code></pre>
</div>

</div>



<p>
在导出的时候我们只希望导出 rss.org ，所以需要设置 <code>:include</code> 属性为 <code>("rss.org")</code> ，同时我们不希望收集 RSS entry 时把 index.org 中的内容也收集进去，所以需要设置
<code>:exclude</code> 属性为 <code>"index.org"</code> 。
</p>

<p>
剩余的属性如下：
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>rss-misc</div><pre class="src src-emacs-lisp" id="rss-misc"><code><span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,eli/blog-publish-dir
<span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-builtin">:rss-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"xml"</span>
<span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span><span class="org-string">"https://elilif.github.io/"</span>
<span class="org-builtin">:html-link-use-abs-url</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:html-link-org-files-as-html</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:include</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"rss.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,eli/blog-publish-dir
<span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-builtin">:rss-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"xml"</span>
<span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span><span class="org-string">"https://elilif.github.io/"</span>
<span class="org-builtin">:html-link-use-abs-url</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:html-link-org-files-as-html</span><span class="org-whitespace-space"> </span>t
<span class="org-builtin">:include</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"rss.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span>
</code></pre>
</div>

</div>


<p>
现在整个 rss 项目就完成了。
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>rss</div><pre class="src src-emacs-lisp" id="rss"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"eli's</span><span class="org-whitespace-space"> </span><span class="org-string">blog</span><span class="org-whitespace-space"> </span><span class="org-string">rss"</span>
<span class="org-whitespace-space"> </span>&lt;&lt;<a href="#rss-sitemap">rss-sitemap</a>&gt;&gt;
<span class="org-whitespace-space"> </span>&lt;&lt;<a href="#rss-misc">rss-misc</a>&gt;&gt;<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"eli's</span><span class="org-whitespace-space"> </span><span class="org-string">blog</span><span class="org-whitespace-space"> </span><span class="org-string">rss"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-feed
<span class="org-whitespace-space"> </span><span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-sitemap
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-entry
<span class="org-whitespace-space"> </span><span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,eli/blog-publish-dir
<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-whitespace-space"> </span><span class="org-builtin">:rss-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"xml"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span><span class="org-string">"https://elilif.github.io/"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-use-abs-url</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-org-files-as-html</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:include</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"rss.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
下面是完整的代码：
</p>
<div class="multilang">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code>&lt;&lt;<a href="#rss-helper-functions">rss-helper-functions</a>&gt;&gt;

&lt;&lt;<a href="#rss">rss</a>&gt;&gt;
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-entry</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Format</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>preview<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>eli/blog-get-preview<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>root<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-property<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>link<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat
<span class="org-whitespace-space">                </span><span class="org-string">"articles/"</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">".html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>pubdate<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"%s</span>
<span class="org-string">:properties:</span>
<span class="org-string">:rss_permalink:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:pubdate:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:end:\n%s\n[[%s][Read</span><span class="org-whitespace-space"> </span><span class="org-string">More]]"</span>
<span class="org-whitespace-space">            </span>title
<span class="org-whitespace-space">            </span>link
<span class="org-whitespace-space">            </span>pubdate
<span class="org-whitespace-space">            </span>preview
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>concat
<span class="org-whitespace-space">             </span>root
<span class="org-whitespace-space">             </span>link<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-entry</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Format</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>preview<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>eli/blog-get-preview<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>root<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-property<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>link<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat
<span class="org-whitespace-space">                </span><span class="org-string">"articles/"</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">".html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>pubdate<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"%s</span>
<span class="org-string">:properties:</span>
<span class="org-string">:rss_permalink:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:pubdate:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:end:\n%s\n[[%s][Read</span><span class="org-whitespace-space"> </span><span class="org-string">More]]"</span>
<span class="org-whitespace-space">            </span>title
<span class="org-whitespace-space">            </span>link
<span class="org-whitespace-space">            </span>pubdate
<span class="org-whitespace-space">            </span>preview
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>concat
<span class="org-whitespace-space">             </span>root
<span class="org-whitespace-space">             </span>link<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">exported</span><span class="org-whitespace-space"> </span><span class="org-doc">as</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span>
<span class="org-doc">TITLE</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">title</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span><span class="org-whitespace-space">  </span><span class="org-doc">LIST</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">internal</span>
<span class="org-doc">representation</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">files</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">include.</span><span class="org-whitespace-space">  </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span>
<span class="org-doc">project."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat
<span class="org-whitespace-space">   </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">   </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-subtree<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">exported</span><span class="org-whitespace-space"> </span><span class="org-doc">as</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span>
<span class="org-doc">TITLE</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">title</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span><span class="org-whitespace-space">  </span><span class="org-doc">LIST</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">internal</span>
<span class="org-doc">representation</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">files</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">include.</span><span class="org-whitespace-space">  </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span>
<span class="org-doc">project."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat
<span class="org-whitespace-space">   </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">   </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-subtree<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-feed</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">PLIST</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">Rss</span><span class="org-whitespace-space"> </span><span class="org-doc">when</span><span class="org-whitespace-space"> </span><span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">rss.org.</span>
<span class="org-doc">DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">location</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">output."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>equal<span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span>filename<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-rss-publish-to-rss<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-feed</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">PLIST</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">Rss</span><span class="org-whitespace-space"> </span><span class="org-doc">when</span><span class="org-whitespace-space"> </span><span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">rss.org.</span>
<span class="org-doc">DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">location</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">output."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>equal<span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span>filename<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-rss-publish-to-rss<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"eli's</span><span class="org-whitespace-space"> </span><span class="org-string">blog</span><span class="org-whitespace-space"> </span><span class="org-string">rss"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-feed
<span class="org-whitespace-space"> </span><span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-sitemap
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-entry
<span class="org-whitespace-space"> </span><span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,eli/blog-publish-dir
<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-whitespace-space"> </span><span class="org-builtin">:rss-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"xml"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span><span class="org-string">"https://elilif.github.io/"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-use-abs-url</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-org-files-as-html</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:include</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"rss.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>
</div>
</div>

<div id="outline-container-Org-文学编程网页导出" class="outline-2">
<h2 id="Org-文学编程网页导出"><span class="section-number-2">3.</span> Org 文学编程网页导出</h2>
<div class="outline-text-2" id="text-Org-文学编程网页导出">
<p>
我希望在导出时能够把代码块中的 noweb 展开，并且在网页中同时提供不展开和展开两种版本。这样就能在保持原汁原味的文学编程的同时又方便读者查看。下面是大致实现思路：
</p>

<p>
通过 <code>org-export-before-processing-functions</code> 在导出时复制一遍代码块，并在添上
<code>:noweb yes</code> 参数后和原代码块放到一个 special block (<code>#+begin_multilang</code> 、
<code>#+end_multilang</code>) 之间。这样在 HTML 就是一个 class 为 <code>multilang</code> 的 <code>div</code> 。然后使用
js 添加一个按钮，实现不同版本间的切换。
</p>

<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>eli/org-export-src-babel-duplicate</div><pre class="src src-emacs-lisp" id="eli/org-export-src-babel-duplicate"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-export-src-babel-duplicate</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>backend<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Duplicate</span><span class="org-whitespace-space"> </span><span class="org-doc">every</span><span class="org-whitespace-space"> </span><span class="org-doc">src</span><span class="org-whitespace-space"> </span><span class="org-doc">babels</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span><span class="org-whitespace-space"> </span><span class="org-doc">buffer.</span>

<span class="org-doc">add</span><span class="org-whitespace-space"> </span><span class="org-doc">\":noweb</span><span class="org-whitespace-space"> </span><span class="org-doc">yes\"</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">duplicated</span><span class="org-whitespace-space"> </span><span class="org-doc">src</span><span class="org-whitespace-space"> </span><span class="org-doc">babels."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>eq<span class="org-whitespace-space"> </span>backend<span class="org-whitespace-space"> </span>'blog<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">save-excursion</span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>point-min<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">while</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>re-search-forward<span class="org-whitespace-space"> </span>org-babel-src-block-regexp<span class="org-whitespace-space"> </span>nil<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>end<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>copy-marker<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>match-end<span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>string<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>match-string<span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>block<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>org-element-at-point<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:begin</span><span class="org-whitespace-space"> </span>block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"#+begin_multilang"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>goto-char<span class="org-whitespace-space"> </span>end<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span>string<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">save-excursion</span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>1+<span class="org-whitespace-space"> </span>end<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>end-of-line<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">:noweb</span><span class="org-whitespace-space"> </span><span class="org-string">yes"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"#+end_multilang"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-hook<span class="org-whitespace-space"> </span>'org-export-before-processing-functions<span class="org-whitespace-space"> </span>#'eli/org-export-src-babel-duplicate<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-export-src-babel-duplicate</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>backend<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Duplicate</span><span class="org-whitespace-space"> </span><span class="org-doc">every</span><span class="org-whitespace-space"> </span><span class="org-doc">src</span><span class="org-whitespace-space"> </span><span class="org-doc">babels</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span><span class="org-whitespace-space"> </span><span class="org-doc">buffer.</span>

<span class="org-doc">add</span><span class="org-whitespace-space"> </span><span class="org-doc">\":noweb</span><span class="org-whitespace-space"> </span><span class="org-doc">yes\"</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">duplicated</span><span class="org-whitespace-space"> </span><span class="org-doc">src</span><span class="org-whitespace-space"> </span><span class="org-doc">babels."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>eq<span class="org-whitespace-space"> </span>backend<span class="org-whitespace-space"> </span>'blog<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">save-excursion</span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>point-min<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">while</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>re-search-forward<span class="org-whitespace-space"> </span>org-babel-src-block-regexp<span class="org-whitespace-space"> </span>nil<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>end<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>copy-marker<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>match-end<span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>string<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>match-string<span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>block<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>org-element-at-point<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:begin</span><span class="org-whitespace-space"> </span>block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"#+begin_multilang"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>goto-char<span class="org-whitespace-space"> </span>end<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span>string<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">save-excursion</span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>1+<span class="org-whitespace-space"> </span>end<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>end-of-line<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">:noweb</span><span class="org-whitespace-space"> </span><span class="org-string">yes"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"#+end_multilang"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-hook<span class="org-whitespace-space"> </span>'org-export-before-processing-functions<span class="org-whitespace-space"> </span>#'eli/org-export-src-babel-duplicate<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>


<p>
Emacs 配置部分的 project 如下：
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>emacs-config</div><pre class="src src-emacs-lisp" id="emacs-config"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">config"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,eli/blog-publish-dir
<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,user-emacs-directory
<span class="org-whitespace-space"> </span><span class="org-builtin">:include</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"config.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-blog-publish-to-html
<span class="org-whitespace-space"> </span>&lt;&lt;<a href="#html">html</a>&gt;&gt;<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-string">"Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">config"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,eli/blog-publish-dir
<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,user-emacs-directory
<span class="org-whitespace-space"> </span><span class="org-builtin">:include</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"config.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-blog-publish-to-html
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-head</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;link</span><span class="org-whitespace-space"> </span><span class="org-string">rel=\"stylesheet\"</span><span class="org-whitespace-space"> </span><span class="org-string">type=\"text/css\"</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/css/style.css\"</span><span class="org-whitespace-space"> </span><span class="org-string">/&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/script.js\"&gt;&lt;/script&gt;</span>
<span class="org-whitespace-space">  </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/toc.js\"&gt;&lt;/script&gt;"</span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-preamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-preamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;nav</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"nav\"&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/index.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Home&lt;/a&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/rss.xml\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;RSS&lt;/a&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/config.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Literate</span><span class="org-whitespace-space"> </span><span class="org-string">Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">Config&lt;/a&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;/nav&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;hr&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-postamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space"> </span><span class="org-builtin">:html-postamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;hr</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"Solid\"&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"info\"&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"author\"&gt;Author:</span><span class="org-whitespace-space"> </span><span class="org-string">%a</span><span class="org-whitespace-space"> </span><span class="org-string">(%e)&lt;/span&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Create</span><span class="org-whitespace-space"> </span><span class="org-string">Date:</span><span class="org-whitespace-space"> </span><span class="org-string">%d&lt;/span&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Last</span><span class="org-whitespace-space"> </span><span class="org-string">modified:</span><span class="org-whitespace-space"> </span><span class="org-string">%C&lt;/span&gt;</span>
<span class="org-whitespace-space">   </span><span class="org-string">&lt;span&gt;Creator:</span><span class="org-whitespace-space"> </span><span class="org-string">%c&lt;/span&gt;</span>
<span class="org-whitespace-space"> </span><span class="org-string">&lt;/div&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space"> </span><span class="org-builtin">:with-creator</span><span class="org-whitespace-space"> </span>nil<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>
</div>
</div>

<div id="outline-container-总结" class="outline-2">
<h2 id="总结"><span class="section-number-2">4.</span> 总结</h2>
<div class="outline-text-2" id="text-总结">
<p>
以下代码完整地包括了前文提到的内容：
</p>
<div class="multilang">
<div class="org-src-container">
<div class="org-src-name"><span class="listing-number">Listing:  </span>result</div><pre class="src src-emacs-lisp" id="result"><code>&lt;&lt;<a href="#blog-helper-functions">blog-helper-functions</a>&gt;&gt;

&lt;&lt;<a href="#rss-helper-functions">rss-helper-functions</a>&gt;&gt;

&lt;&lt;<a href="#config-helper-functions">config-helper-functions</a>&gt;&gt;

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>org-publish-project-alist<span class="org-whitespace-space"> </span>`<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>
<span class="org-whitespace-space">                                  </span>&lt;&lt;<a href="#my-blog">my-blog</a>&gt;&gt;
<span class="org-whitespace-space">                                  </span>&lt;&lt;<a href="#rss">rss</a>&gt;&gt;
<span class="org-whitespace-space">                                  </span>&lt;&lt;<a href="#emacs-config">emacs-config</a>&gt;&gt;
<span class="org-whitespace-space">                                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><code><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-define-derived-backend<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>'html
<span class="org-whitespace-space">  </span><span class="org-builtin">:translate-alist</span><span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>src-block<span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span>eli/org-blog-src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-src-block</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>src-block<span class="org-whitespace-space"> </span>_contents<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Transcode</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">SRC-BLOCK</span><span class="org-whitespace-space"> </span><span class="org-doc">element</span><span class="org-whitespace-space"> </span><span class="org-doc">from</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>
<span class="org-doc">CONTENTS</span><span class="org-whitespace-space"> </span><span class="org-doc">holds</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">contents</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">item.</span><span class="org-whitespace-space">  </span><span class="org-doc">INFO</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">plist</span><span class="org-whitespace-space"> </span><span class="org-doc">holding</span>
<span class="org-doc">contextual</span><span class="org-whitespace-space"> </span><span class="org-doc">information."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-export-read-attribute<span class="org-whitespace-space"> </span><span class="org-builtin">:attr_html</span><span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span><span class="org-builtin">:textarea</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-html--textarea-block<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>lang<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:language</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>code<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-html-format-code<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>label<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>org-html--reference<span class="org-whitespace-space"> </span>src-block<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>lbl<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">id=\"%s\""</span><span class="org-whitespace-space"> </span>lbl<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>klipsify<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">and</span><span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>plist-get<span class="org-whitespace-space"> </span>info<span class="org-whitespace-space"> </span><span class="org-builtin">:html-klipsify-src</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>member<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-string">"javascript"</span><span class="org-whitespace-space"> </span><span class="org-string">"js"</span>
<span class="org-whitespace-space">                                           </span><span class="org-string">"ruby"</span><span class="org-whitespace-space"> </span><span class="org-string">"scheme"</span><span class="org-whitespace-space"> </span><span class="org-string">"clojure"</span><span class="org-whitespace-space"> </span><span class="org-string">"php"</span><span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>not<span class="org-whitespace-space"> </span>lang<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"example\"%s&gt;&lt;code&gt;\n%s&lt;/code&gt;&lt;/pre&gt;"</span><span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-container\"&gt;\n%s%s\n&lt;/div&gt;"</span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Build</span><span class="org-whitespace-space"> </span><span class="org-comment">caption.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>caption<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-export-get-caption<span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:name</span><span class="org-whitespace-space"> </span>src-block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>not<span class="org-whitespace-space"> </span>caption<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">""</span>
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>listing-number
<span class="org-whitespace-space">                           </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>format
<span class="org-whitespace-space">                            </span><span class="org-string">"&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"listing-number\"&gt;%s</span><span class="org-whitespace-space"> </span><span class="org-string">&lt;/span&gt;"</span>
<span class="org-whitespace-space">                            </span><span class="org-string">"Listing:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"org-src-name\"&gt;%s%s&lt;/div&gt;"</span>
<span class="org-whitespace-space">                              </span>listing-number
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>org-trim<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-export-data<span class="org-whitespace-space"> </span>caption<span class="org-whitespace-space"> </span>info<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">                </span><span class="org-comment-delimiter">;;</span><span class="org-whitespace-space"> </span><span class="org-comment">Contents.</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>klipsify
<span class="org-whitespace-space">                    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre&gt;&lt;code</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s%s&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                            </span>lang
<span class="org-whitespace-space">                            </span>label
<span class="org-whitespace-space">                            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>string=<span class="org-whitespace-space"> </span>lang<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span>
<span class="org-whitespace-space">                                </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">data-editor-type=\"html\""</span>
<span class="org-whitespace-space">                              </span><span class="org-string">""</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span>
<span class="org-whitespace-space">                            </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"&lt;pre</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"src</span><span class="org-whitespace-space"> </span><span class="org-string">src-%s\"%s&gt;&lt;code&gt;%s&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="org-whitespace-space">                          </span>lang<span class="org-whitespace-space"> </span>label<span class="org-whitespace-space"> </span>code<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-comment-delimiter">;;;</span><span class="org-comment">###</span><span class="org-comment"><span class="org-warning">autoload</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-blog-publish-to-html</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">HTML.</span>

<span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">filename</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">Org</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">be</span><span class="org-whitespace-space"> </span><span class="org-doc">published.</span><span class="org-whitespace-space">  </span><span class="org-doc">PLIST</span>
<span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">property</span><span class="org-whitespace-space"> </span><span class="org-doc">list</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">given</span><span class="org-whitespace-space"> </span><span class="org-doc">project.</span><span class="org-whitespace-space">  </span><span class="org-doc">PUB-DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span>
<span class="org-doc">publishing</span><span class="org-whitespace-space"> </span><span class="org-doc">directory.</span>

<span class="org-doc">Return</span><span class="org-whitespace-space"> </span><span class="org-doc">output</span><span class="org-whitespace-space"> </span><span class="org-doc">file</span><span class="org-whitespace-space"> </span><span class="org-doc">name."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>org-publish-org-to<span class="org-whitespace-space"> </span>'blog<span class="org-whitespace-space"> </span>filename
<span class="org-whitespace-space">                      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>&gt;<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>length<span class="org-whitespace-space"> </span>org-html-extension<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">"."</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">or</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span><span class="org-builtin">:html-extension</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">                                  </span>org-html-extension
<span class="org-whitespace-space">                                  </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                      </span>plist<span class="org-whitespace-space"> </span>pub-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>eli/blog-base-dir<span class="org-whitespace-space"> </span><span class="org-string">"path-to/blog/"</span>
<span class="org-whitespace-space">      </span>eli/blog-publish-dir<span class="org-whitespace-space"> </span><span class="org-string">"your-blog-site-dir"</span>
<span class="org-whitespace-space">      </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">with</span><span class="org-whitespace-space"> </span><span class="org-doc">title."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">          </span><span class="org-string">"\n"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"#+DATE:</span><span class="org-whitespace-space"> </span><span class="org-string">2023-10-10"</span>
<span class="org-whitespace-space">          </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-org<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/sitemap-dated-entry-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">STYLE</span><span class="org-whitespace-space"> </span><span class="org-doc">format</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">includes</span><span class="org-whitespace-space"> </span><span class="org-doc">date."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>=<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>length<span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"*%s*"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"{{{timestamp(%s)}}}</span><span class="org-whitespace-space">   </span><span class="org-string">[[file:%s][%s]]"</span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat<span class="org-whitespace-space"> </span><span class="org-string">"articles/"</span><span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">              </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-to-list<span class="org-whitespace-space"> </span>'org-export-global-macros
<span class="org-whitespace-space">             </span>'<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-string">"timestamp"</span><span class="org-whitespace-space"> </span>.<span class="org-whitespace-space"> </span><span class="org-string">"@@html:&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"timestamp\"&gt;[$1]&lt;/span&gt;@@"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/blog-publish-completion</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>publishing-directory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:publishing-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitamap<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>file-name-with-extension<span class="org-whitespace-space"> </span>eli/blog-sitamap<span class="org-whitespace-space"> </span><span class="org-string">"html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>orig-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitamap<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>target-file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name
<span class="org-whitespace-space">                       </span>sitamap
<span class="org-whitespace-space">                       </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-directory<span class="org-whitespace-space"> </span>publishing-directory<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>rename-file<span class="org-whitespace-space"> </span>orig-file<span class="org-whitespace-space"> </span>target-file<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/kill-sitemap-buffer</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filename<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:sitemap-filename</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>base-dir<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>plist-get<span class="org-whitespace-space"> </span>project<span class="org-whitespace-space"> </span><span class="org-builtin">:base-directory</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>sitemap-filepath<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>expand-file-name<span class="org-whitespace-space"> </span>sitemap-filename<span class="org-whitespace-space"> </span>base-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">when-let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>sitemap-buffer<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>find-buffer-visiting<span class="org-whitespace-space"> </span>sitemap-filepath<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>kill-buffer<span class="org-whitespace-space"> </span>sitemap-buffer<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-entry</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Format</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>preview<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>eli/blog-get-preview<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>root<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-property<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>link<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat
<span class="org-whitespace-space">                </span><span class="org-string">"articles/"</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">".html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>pubdate<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"%s</span>
<span class="org-string">:properties:</span>
<span class="org-string">:rss_permalink:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:pubdate:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:end:\n%s\n[[%s][Read</span><span class="org-whitespace-space"> </span><span class="org-string">More]]"</span>
<span class="org-whitespace-space">            </span>title
<span class="org-whitespace-space">            </span>link
<span class="org-whitespace-space">            </span>pubdate
<span class="org-whitespace-space">            </span>preview
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>concat
<span class="org-whitespace-space">             </span>root
<span class="org-whitespace-space">             </span>link<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-entry</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>entry<span class="org-whitespace-space"> </span>_style<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Format</span><span class="org-whitespace-space"> </span><span class="org-doc">ENTRY</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">PROJECT."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">let*</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish--expand-file-name<span class="org-whitespace-space"> </span>entry<span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>preview<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>eli/blog-get-preview<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>parsed-title<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>title
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span>parsed-title
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-no-properties
<span class="org-whitespace-space">               </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-interpret-data<span class="org-whitespace-space"> </span>parsed-title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>file<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>root<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>org-publish-property<span class="org-whitespace-space"> </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>link<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>concat
<span class="org-whitespace-space">                </span><span class="org-string">"articles/"</span>
<span class="org-whitespace-space">                </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>file-name-sans-extension<span class="org-whitespace-space"> </span>entry<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-whitespace-space"> </span><span class="org-string">".html"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">         </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>pubdate<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>car<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>org-publish-find-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:date</span><span class="org-whitespace-space"> </span>project<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-publish-cache-set-file-property<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span><span class="org-builtin">:title</span><span class="org-whitespace-space"> </span>title<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>format<span class="org-whitespace-space"> </span><span class="org-string">"%s</span>
<span class="org-string">:properties:</span>
<span class="org-string">:rss_permalink:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:pubdate:</span><span class="org-whitespace-space"> </span><span class="org-string">%s</span>
<span class="org-string">:end:\n%s\n[[%s][Read</span><span class="org-whitespace-space"> </span><span class="org-string">More]]"</span>
<span class="org-whitespace-space">            </span>title
<span class="org-whitespace-space">            </span>link
<span class="org-whitespace-space">            </span>pubdate
<span class="org-whitespace-space">            </span>preview
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>concat
<span class="org-whitespace-space">             </span>root
<span class="org-whitespace-space">             </span>link<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">exported</span><span class="org-whitespace-space"> </span><span class="org-doc">as</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span>
<span class="org-doc">TITLE</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">title</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span><span class="org-whitespace-space">  </span><span class="org-doc">LIST</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">internal</span>
<span class="org-doc">representation</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">files</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">include.</span><span class="org-whitespace-space">  </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span>
<span class="org-doc">project."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat
<span class="org-whitespace-space">   </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">   </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-subtree<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-sitemap</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>title<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Generate</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">sitemap</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">posts</span><span class="org-whitespace-space"> </span><span class="org-doc">that</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">exported</span><span class="org-whitespace-space"> </span><span class="org-doc">as</span><span class="org-whitespace-space"> </span><span class="org-doc">a</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span>
<span class="org-doc">TITLE</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">title</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">RSS</span><span class="org-whitespace-space"> </span><span class="org-doc">feed.</span><span class="org-whitespace-space">  </span><span class="org-doc">LIST</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">an</span><span class="org-whitespace-space"> </span><span class="org-doc">internal</span>
<span class="org-doc">representation</span><span class="org-whitespace-space"> </span><span class="org-doc">for</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">files</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">include.</span><span class="org-whitespace-space">  </span><span class="org-doc">PROJECT</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span>
<span class="org-doc">project."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>concat
<span class="org-whitespace-space">   </span><span class="org-string">"#+TITLE:</span><span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span>title
<span class="org-whitespace-space">   </span><span class="org-string">"\n\n"</span>
<span class="org-whitespace-space">   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-list-to-subtree<span class="org-whitespace-space"> </span>list<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-feed</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">PLIST</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">Rss</span><span class="org-whitespace-space"> </span><span class="org-doc">when</span><span class="org-whitespace-space"> </span><span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">rss.org.</span>
<span class="org-doc">DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">location</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">output."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>equal<span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span>filename<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-rss-publish-to-rss<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-publish-rss-feed</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Publish</span><span class="org-whitespace-space"> </span><span class="org-doc">PLIST</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">Rss</span><span class="org-whitespace-space"> </span><span class="org-doc">when</span><span class="org-whitespace-space"> </span><span class="org-doc">FILENAME</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">rss.org.</span>
<span class="org-doc">DIR</span><span class="org-whitespace-space"> </span><span class="org-doc">is</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">location</span><span class="org-whitespace-space"> </span><span class="org-doc">of</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">output."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">if</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>equal<span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>file-name-nondirectory<span class="org-whitespace-space"> </span>filename<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>org-rss-publish-to-rss<span class="org-whitespace-space"> </span>plist<span class="org-whitespace-space"> </span>filename<span class="org-whitespace-space"> </span>dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-export-src-babel-duplicate</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>backend<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Duplicate</span><span class="org-whitespace-space"> </span><span class="org-doc">every</span><span class="org-whitespace-space"> </span><span class="org-doc">src</span><span class="org-whitespace-space"> </span><span class="org-doc">babels</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span><span class="org-whitespace-space"> </span><span class="org-doc">buffer.</span>

<span class="org-doc">add</span><span class="org-whitespace-space"> </span><span class="org-doc">\":noweb</span><span class="org-whitespace-space"> </span><span class="org-doc">yes\"</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">duplicated</span><span class="org-whitespace-space"> </span><span class="org-doc">src</span><span class="org-whitespace-space"> </span><span class="org-doc">babels."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>eq<span class="org-whitespace-space"> </span>backend<span class="org-whitespace-space"> </span>'blog<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">save-excursion</span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>point-min<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">while</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>re-search-forward<span class="org-whitespace-space"> </span>org-babel-src-block-regexp<span class="org-whitespace-space"> </span>nil<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>end<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>copy-marker<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>match-end<span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>string<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>match-string<span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>block<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>org-element-at-point<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:begin</span><span class="org-whitespace-space"> </span>block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"#+begin_multilang"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>goto-char<span class="org-whitespace-space"> </span>end<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span>string<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">save-excursion</span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>1+<span class="org-whitespace-space"> </span>end<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>end-of-line<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">:noweb</span><span class="org-whitespace-space"> </span><span class="org-string">yes"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"#+end_multilang"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-hook<span class="org-whitespace-space"> </span>'org-export-before-processing-functions<span class="org-whitespace-space"> </span>#'eli/org-export-src-babel-duplicate<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">defun</span><span class="org-whitespace-space"> </span><span class="org-function-name">eli/org-export-src-babel-duplicate</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>backend<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-whitespace-space">  </span><span class="org-doc">"Duplicate</span><span class="org-whitespace-space"> </span><span class="org-doc">every</span><span class="org-whitespace-space"> </span><span class="org-doc">src</span><span class="org-whitespace-space"> </span><span class="org-doc">babels</span><span class="org-whitespace-space"> </span><span class="org-doc">in</span><span class="org-whitespace-space"> </span><span class="org-doc">the</span><span class="org-whitespace-space"> </span><span class="org-doc">current</span><span class="org-whitespace-space"> </span><span class="org-doc">buffer.</span>

<span class="org-doc">add</span><span class="org-whitespace-space"> </span><span class="org-doc">\":noweb</span><span class="org-whitespace-space"> </span><span class="org-doc">yes\"</span><span class="org-whitespace-space"> </span><span class="org-doc">to</span><span class="org-whitespace-space"> </span><span class="org-doc">duplicated</span><span class="org-whitespace-space"> </span><span class="org-doc">src</span><span class="org-whitespace-space"> </span><span class="org-doc">babels."</span>
<span class="org-whitespace-space">  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">when</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span>eq<span class="org-whitespace-space"> </span>backend<span class="org-whitespace-space"> </span>'blog<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">    </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-keyword">save-excursion</span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>point-min<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">      </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-keyword">while</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span>re-search-forward<span class="org-whitespace-space"> </span>org-babel-src-block-regexp<span class="org-whitespace-space"> </span>nil<span class="org-whitespace-space"> </span>t<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span>
<span class="org-whitespace-space">        </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-keyword">let</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>end<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>copy-marker<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">(</span></span>match-end<span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-9">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>string<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>match-string<span class="org-whitespace-space"> </span>0<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">              </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>block<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>org-element-at-point<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>org-element-property<span class="org-whitespace-space"> </span><span class="org-builtin">:begin</span><span class="org-whitespace-space"> </span>block<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"#+begin_multilang"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>goto-char<span class="org-whitespace-space"> </span>end<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span>string<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-keyword">save-excursion</span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>goto-char<span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">(</span></span>1+<span class="org-whitespace-space"> </span>end<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-8">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>end-of-line<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span>
<span class="org-whitespace-space">            </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"</span><span class="org-whitespace-space"> </span><span class="org-string">:noweb</span><span class="org-whitespace-space"> </span><span class="org-string">yes"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-7">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"\n"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span>
<span class="org-whitespace-space">          </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">(</span></span>insert<span class="org-whitespace-space"> </span><span class="org-string">"#+end_multilang"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span>add-hook<span class="org-whitespace-space"> </span>'org-export-before-processing-functions<span class="org-whitespace-space"> </span>#'eli/org-export-src-babel-duplicate<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>

<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">setq</span><span class="org-whitespace-space"> </span>org-publish-project-alist<span class="org-whitespace-space"> </span>`<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">(</span></span>
<span class="org-whitespace-space">                                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-string">"eli's</span><span class="org-whitespace-space"> </span><span class="org-string">blog"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span>expand-file-name<span class="org-whitespace-space"> </span><span class="org-string">"articles"</span><span class="org-whitespace-space"> </span>eli/blog-publish-dir<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:recursive</span><span class="org-whitespace-space"> </span>nil
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:htmlized-source</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-blog-publish-to-html
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>

<span class="org-whitespace-space">                                   </span><span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:completion-function</span><span class="org-whitespace-space"> </span>eli/blog-publish-completion
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span>,eli/blog-sitamap
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-sitemap
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/sitemap-dated-entry-format

<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-head</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;link</span><span class="org-whitespace-space"> </span><span class="org-string">rel=\"stylesheet\"</span><span class="org-whitespace-space"> </span><span class="org-string">type=\"text/css\"</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/css/style.css\"</span><span class="org-whitespace-space"> </span><span class="org-string">/&gt;</span>
<span class="org-whitespace-space">                                    </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/script.js\"&gt;&lt;/script&gt;</span>
<span class="org-whitespace-space">                                    </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/toc.js\"&gt;&lt;/script&gt;"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-preamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-preamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;nav</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"nav\"&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/index.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Home&lt;/a&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/rss.xml\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;RSS&lt;/a&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/config.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Literate</span><span class="org-whitespace-space"> </span><span class="org-string">Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">Config&lt;/a&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;/nav&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;hr&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-postamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-postamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;hr</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"Solid\"&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"info\"&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"author\"&gt;Author:</span><span class="org-whitespace-space"> </span><span class="org-string">%a</span><span class="org-whitespace-space"> </span><span class="org-string">(%e)&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Create</span><span class="org-whitespace-space"> </span><span class="org-string">Date:</span><span class="org-whitespace-space"> </span><span class="org-string">%d&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Last</span><span class="org-whitespace-space"> </span><span class="org-string">modified:</span><span class="org-whitespace-space"> </span><span class="org-string">%C&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span&gt;Creator:</span><span class="org-whitespace-space"> </span><span class="org-string">%c&lt;/span&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;/div&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:with-creator</span><span class="org-whitespace-space"> </span>nil
<span class="org-whitespace-space">                                   </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-string">"eli's</span><span class="org-whitespace-space"> </span><span class="org-string">blog</span><span class="org-whitespace-space"> </span><span class="org-string">rss"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-feed
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:auto-sitemap</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-function</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-sitemap
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-title</span><span class="org-whitespace-space"> </span><span class="org-string">"Eli's</span><span class="org-whitespace-space"> </span><span class="org-string">Blog"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-filename</span><span class="org-whitespace-space"> </span><span class="org-string">"rss.org"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-sort-files</span><span class="org-whitespace-space"> </span>anti-chronologically
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:sitemap-format-entry</span><span class="org-whitespace-space"> </span>eli/org-publish-rss-entry
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:preparation-function</span><span class="org-whitespace-space"> </span>eli/kill-sitemap-buffer
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,eli/blog-publish-dir
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,eli/blog-base-dir
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:rss-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"xml"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:base-extension</span><span class="org-whitespace-space"> </span><span class="org-string">"org"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-link-home</span><span class="org-whitespace-space"> </span><span class="org-string">"https://elilif.github.io/"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-link-use-abs-url</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-link-org-files-as-html</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:include</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-string">"rss.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:exclude</span><span class="org-whitespace-space"> </span><span class="org-string">"index.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-string">"Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">config"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:publishing-directory</span><span class="org-whitespace-space"> </span>,eli/blog-publish-dir
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:base-directory</span><span class="org-whitespace-space"> </span>,user-emacs-directory
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:include</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-string">"config.org"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:publishing-function</span><span class="org-whitespace-space"> </span>eli/org-blog-publish-to-html
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-head</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;link</span><span class="org-whitespace-space"> </span><span class="org-string">rel=\"stylesheet\"</span><span class="org-whitespace-space"> </span><span class="org-string">type=\"text/css\"</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/css/style.css\"</span><span class="org-whitespace-space"> </span><span class="org-string">/&gt;</span>
<span class="org-whitespace-space">                                    </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/script.js\"&gt;&lt;/script&gt;</span>
<span class="org-whitespace-space">                                    </span><span class="org-string">&lt;script</span><span class="org-whitespace-space"> </span><span class="org-string">src=\"/scripts/toc.js\"&gt;&lt;/script&gt;"</span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-preamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-preamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;nav</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"nav\"&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/index.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Home&lt;/a&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/rss.xml\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;RSS&lt;/a&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;a</span><span class="org-whitespace-space"> </span><span class="org-string">href=\"/config.html\"</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"button\"&gt;Literate</span><span class="org-whitespace-space"> </span><span class="org-string">Emacs</span><span class="org-whitespace-space"> </span><span class="org-string">Config&lt;/a&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;/nav&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;hr&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-postamble</span><span class="org-whitespace-space"> </span>t
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:html-postamble-format</span><span class="org-whitespace-space"> </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-string">"en"</span><span class="org-whitespace-space"> </span><span class="org-string">"&lt;hr</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"Solid\"&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;div</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"info\"&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"author\"&gt;Author:</span><span class="org-whitespace-space"> </span><span class="org-string">%a</span><span class="org-whitespace-space"> </span><span class="org-string">(%e)&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Create</span><span class="org-whitespace-space"> </span><span class="org-string">Date:</span><span class="org-whitespace-space"> </span><span class="org-string">%d&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span</span><span class="org-whitespace-space"> </span><span class="org-string">class=\"date\"&gt;Last</span><span class="org-whitespace-space"> </span><span class="org-string">modified:</span><span class="org-whitespace-space"> </span><span class="org-string">%C&lt;/span&gt;</span>
<span class="org-whitespace-space">                                     </span><span class="org-string">&lt;span&gt;Creator:</span><span class="org-whitespace-space"> </span><span class="org-string">%c&lt;/span&gt;</span>
<span class="org-whitespace-space">                                   </span><span class="org-string">&lt;/div&gt;"</span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-4">)</span></span>
<span class="org-whitespace-space">                                   </span><span class="org-builtin">:with-creator</span><span class="org-whitespace-space"> </span>nil<span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-3">)</span></span>
<span class="org-whitespace-space">                                  </span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-mindre-paren"><span class="org-rainbow-delimiters-depth-1">)</span></span>
</code></pre>
</div>

</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://github.com/niklasfasching/go-org#:~:text=the%20goal%20for%20the%20parser%20is%20to%20support%20a%20reasonable%20subset%20of%20Org%20mode.%20Org%20mode%20is%20huge%20and%20I%20like%20to%20follow%20the%2080/20%20rule.">GitHub - niklasfasching/go-org</a> ：the goal for the parser is to support a
reasonable subset of Org mode. Org mode is huge and I like to follow the 80/20
rule.
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
代码块中如果有 <code>&lt;&lt;xxx&gt;&gt;</code> 之类的文本，可以点击代码块上的 <code>expand</code> 按钮展开，也可以直接点击 <code>&lt;&lt;xxx&gt;&gt;</code> 跳转到定义位置。
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3" role="doc-backlink">3</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
具体可以查阅变量 <code>org-html-preamble-format</code> 的文档。
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4" role="doc-backlink">4</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
具体可以查阅变量 <code>org-html-postamble-format</code> 的文档。
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5" role="doc-backlink">5</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
具体可以查阅变量 <code>org-html-head</code> 的文档。
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<hr class="Solid">
<div class="info">
  <span class="author">Author: Eli Qian (<a href="mailto:eli.q.qian@gmail.com">eli.q.qian@gmail.com</a>)</span>
  <span class="date">Create Date: 2024-02-21</span>
  <span class="date">Last modified: 2024-02-28 Wed 19:46</span>
  <span>Creator: <a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.2 (<a href="https://orgmode.org">Org</a> mode 9.6.15)</span>
</div>
</div>
</body>
</html>
